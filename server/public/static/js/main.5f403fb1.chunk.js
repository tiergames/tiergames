(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{122:function(e,t){},146:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(28),i=a.n(s),c=a(1),o=a.n(c),l=a(2),u=a(9),m=a(3),h=a(4),p=a(6),f=a(5),d=a(7),g=a(12),v=a(11),w=a.n(v),b=function e(){var t=this;Object(m.a)(this,e),this.signup=function(e,a,n){return t.service.post("/signup",{username:e,email:a,password:n}).then((function(e){return e.data}))},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then((function(e){return e.data}))},this.confirmAccount=function(e){return t.service.post("/confirm/".concat(e)).then((function(e){return e.data}))},this.forgotPassword=function(e){return t.service.post("/forgot-password",{email:e}).then((function(e){return e.data}))},this.resetPassword=function(e){return t.service.post("/reset-password/".concat(e)).then((function(e){return e.data}))},this.updatePassword=function(e,a){return t.service.post("/update-password/".concat(a),{password:e}).then((function(e){return e.data}))},this.loggedin=function(){return t.service.get("/currentuser").then((function(e){return e.data}))},this.logout=function(){return t.service.get("/logout").then((function(e){return e.data}))},this.service=w.a.create({baseURL:"".concat("https://tiergames.herokuapp.com","/api/auth"),withCredentials:!0})},y=a(29),E=a.n(y),O=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home page"))}}]),t}(n.Component),k=a(8);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).service=new b,a.state={username:"",password:""},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"login"},r.a.createElement("h2",null,"Login"),r.a.createElement("div",{className:"account-question"},r.a.createElement("p",null,"Don't you have an account? ",r.a.createElement(k.b,{to:"/signup"},"Join us")),r.a.createElement("a",{href:"".concat("https://tiergames.herokuapp.com","/api/auth/facebook")},"Login with Facebook"),r.a.createElement("a",{href:"".concat("https://tiergames.herokuapp.com","/api/auth/google")},"Login With Google")),r.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)},id:"login-username",className:"input"}),r.a.createElement("label",{htmlFor:"login-username",className:"label"},"Username")),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)},id:"login-password",className:"input"}),r.a.createElement("label",{htmlFor:"login-password",className:"label"},"Password")),r.a.createElement("div",{className:"form-actions"},r.a.createElement("input",{type:"submit",value:"Login"}))),r.a.createElement("h4",null,this.state.error?"Error":""))}},{key:"handleChange",value:function(e){var t=S({},this.state);t[e.target.name]="number"===e.target.type?+e.target.value:e.target.value,this.setState(t)}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.username,r=a.password;this.service.login(n,r).then((function(e){t.setState(S({},t.state,{username:"",password:"",error:!1})),t.props.setUser(e),t.props.history.push("/")})).catch((function(e){t.setState(S({},t.state,{username:n,password:"",error:!0}))}))}}]),t}(n.Component),P=Object(g.g)(N);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e){var t=D({},a.state);t[e.target.name]="number"===e.target.type?+e.target.value:e.target.value,a.setState(t)},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password,s=t.email;a.service.signup(n,s,r).then((function(e){a.setState(D({},a.state,{username:"",password:"",email:"",error:!1})),a.props.setUser(e),a.props.history.push("/")})).catch((function(e){a.setState(D({},a.state,{username:n,password:"",email:"",error:!0}))}))},a.service=new b,a.state={username:"",email:"",password:""},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"signup"},r.a.createElement("h2",null,"Signup"),r.a.createElement("div",{className:"account-question"},r.a.createElement("p",null,"Already have an account? ",r.a.createElement(k.b,{to:"/login"},"Login"))),r.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",name:"username",id:"username",onChange:function(t){return e.handleChange(t)},className:"input"}),r.a.createElement("label",{htmlFor:"username",className:"label"},"Username")),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"email",name:"email",id:"email",onChange:function(t){return e.handleChange(t)},className:"input"}),r.a.createElement("label",{htmlFor:"email",className:"label"},"Email")),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"password",name:"password",id:"password",onChange:function(t){return e.handleChange(t)},className:"input"}),r.a.createElement("label",{htmlFor:"password",className:"label"},"Password")),r.a.createElement("div",{className:"form-actions"},r.a.createElement("input",{type:"submit",value:"Singup"}))),r.a.createElement("h4",null,this.state.error?"Error":""))}}]),t}(n.Component),R=Object(g.g)(C),F=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).service=new b,a.state={isActive:void 0},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,!0===this.state.isActive&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Account activated!"),r.a.createElement(k.b,{to:"/login"},"Login now!")),!1===this.state.isActive&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"The account couldn't be activated"),r.a.createElement("p",null,"The token to activate your account is incorrect")))}},{key:"updateAccountStatus",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.match.params.confirmationToken,e.next=4,this.service.confirmAccount(t);case 4:e.sent,this.setState({isActive:!0}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),a=e.t0.response,n=a.status,r=a.data,404===n&&"CONFIRMATION_USER_NOT_FOUND"===r.status&&this.setState({isActive:!1}),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateAccountStatus(this.props.match.params.confirmationToken);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component),U=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).service=new b,e.state={email:"",submitted:!1},e}return Object(d.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n))}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.email;this.service.forgotPassword(a).then((function(){t.setState({email:"",submitted:!0})})).catch((function(e){var a=e.response,n=a.status,r=a.data;404===n&&"FORGOT-PASSWORD_USER_NOT_FOUND"===r.status&&t.setState({email:"",submitted:!0}),console.error(e.message)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"forgot-password"},r.a.createElement("h2",null,"Forgot your password?"),!this.state.submitted&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Please write down below the e-mail address you registered with Tier"),r.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",name:"email",id:"email",value:this.state.email,onChange:function(t){return e.handleChange(t)},className:"input"})),r.a.createElement("div",{className:"form-actions"},r.a.createElement("input",{type:"submit",value:"Confirm"})))),this.state.submitted&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"If a user with that email exist, a password reset will be e-mailed to you"),r.a.createElement("small",null,"(Don't forget to check your spam folder or resend the email)")))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).service=new b,a.state={isMatch:void 0,password:"",updated:!1,redirect:!1},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n))}},{key:"handleFormSubmit",value:function(e){e.preventDefault(),this.updatePassword()}},{key:"render",value:function(){var e=this;return r.a.createElement("section",null,r.a.createElement("h2",null,"Reset password"),!0===this.state.isMatch&&!this.state.updated&&r.a.createElement("h3",null,"Token match!"),!this.state.updated&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Generate a new password"),r.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"password",name:"password",id:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)},className:"input"})),r.a.createElement("div",{className:"form-actions"},r.a.createElement("input",{type:"submit",value:"Confirm"}))),r.a.createElement("h4",null,this.state.message),r.a.createElement("h4",null,this.state.error?"Error":"")),!1===this.state.isMatch&&r.a.createElement("h3",null,"The token to reset your password is incorrect or has expired"),!0===this.state.updated&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Password successfully updated"),r.a.createElement("span",null,"Please wait...")),this.state.redirect&&r.a.createElement(g.a,{to:"/login"}))}},{key:"checkPasswordToken",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.match.params.resetPasswordToken,e.next=4,this.service.resetPassword(t);case 4:e.sent,this.setState({isMatch:!0,error:!1}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),a=e.t0.response,n=a.status,r=a.data,404===n&&"RESET-PASSWORD_TOKEN_NOT_FOUND_OR_EXPIRED"===r.status&&this.setState({isMatch:!1,error:!0}),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"updatePassword",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,r,s,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.resetPasswordToken,a=this.state.password,e.prev=2,e.next=5,this.service.updatePassword(a,t);case 5:e.sent,this.setState({password:"",updated:!0,error:!1}),setTimeout((function(){i.setState({redirect:!0})}),2500),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),n=e.t0.response,r=n.status,s=n.data,500===r&&"UPDATE-PASSWORD_FAILED"===s.status&&this.setState({password:"",error:!0,updated:!1}),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.checkPasswordToken(this.props.match.params.resetPasswordToken);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component),G=(n.Component,function e(){var t=this;Object(m.a)(this,e),this.getProfile=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.follow=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.put("/follow",{followed:a,follower:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.unfollow=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.put("/unfollow",{followed:a,follower:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.service=w.a.create({baseURL:"http://localhost:3001/api/profile"})}),L=function e(){var t=this;Object(m.a)(this,e),this.getReviewData=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getReviews=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("?limit=".concat(n,"&offset=").concat(a));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getReviewsPerUser=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/user/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getReviewsPerPlatform=function(){var e=Object(l.a)(o.a.mark((function e(a,n,r){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/".concat(r));case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.getReviewsPerGame=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/game/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteReview=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.delete("/delete/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getRelationatedReviews=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/relationated/".concat(a,"/").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.createReview=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.post("/add",a);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.follow=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.put("/follow",{reviewID:a,followerID:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.unfollow=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.put("/unfollow",{reviewID:a,followerID:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.service=w.a.create({baseURL:"".concat("https://tiergames.herokuapp.com","/api/reviews")})},_=function e(){var t=this;Object(m.a)(this,e),this.getGames=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("?offset=".concat(n,"&limit=").concat(a));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.follow=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.put("/follow",{gameID:a,followerID:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.unfollow=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.put("/unfollow",{gameID:a,followerID:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getBestRated=function(){var e=Object(l.a)(o.a.mark((function e(a,n,r){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("?offset=".concat(n,"&limit=").concat(a,"&sorting=rating&order=").concat(r));case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.getGameName=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/game-name/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getGameCover=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/game-cover/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getReleases=function(){var e=Object(l.a)(o.a.mark((function e(a,n,r,s){var i,c,l,u,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r,e.next=1===e.t0?3:2===e.t0?6:3===e.t0?9:4===e.t0?12:5===e.t0?15:6===e.t0?18:21;break;case 3:return l=-7,u=0,e.abrupt("break",21);case 6:return l=0,u=7,e.abrupt("break",21);case 9:return l=7,u=14,e.abrupt("break",21);case 12:return l=14,u=30,e.abrupt("break",21);case 15:return l=30,u=180,e.abrupt("break",21);case 18:return l=180,u=365,e.abrupt("break",21);case 21:return i=Math.round((new Date).setDate((new Date).getDate()+l)/1e3),c=Math.round((new Date).setDate((new Date).getDate()+u)/1e3),e.next=25,t.service.get("?offset=".concat(n,"&limit=").concat(a,"&from=").concat(i,"&to=").concat(c,"&sorting=first_release_date&order=").concat(s));case 25:return m=e.sent,e.abrupt("return",m);case 27:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),this.getGameData=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getGamesPerGenre=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/?genres=".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getGamesPerPlatform=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/?platforms=".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getGamesPerPlatformAndGenre=function(){var e=Object(l.a)(o.a.mark((function e(a,n,r,s){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/?platforms=".concat(r,"&genres=").concat(s,"&offset=").concat(n,"&limit=").concat(a));case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),this.gateRelatedGames=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/related/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAlternativeNames=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/alternative-names/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getRelationedContent=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/related-content/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getInvolvedCompanies=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/involved-companies/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getReleaseDates=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/release-dates/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getWebsites=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/websites/".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.service=w.a.create({baseURL:"".concat("https://tiergames.herokuapp.com","/api/games")})};function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).gamesService=new _,a.state={isLoadingGameTitle:!0,gameTile:a.props.gameTile},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("article",{className:"review-title",style:{backgroundImage:"url(http:".concat(this.state.gameTile.coverUrl,")")}},r.a.createElement("div",null,r.a.createElement("p",null,this.state.gameTile.totalRating),r.a.createElement("h2",null,this.state.gameTile.title),this.state.isLoadingGameTitle?r.a.createElement("p",null,"Loading game title..."):r.a.createElement("p",null,this.state.gameTile.name),r.a.createElement("p",null,this.state.gameTile.author.username)))}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadGameName(),this.loadGameCover();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadGameName",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gamesService.getGameName(this.state.gameTile.gameID);case 2:t=e.sent,(a=M({},this.state.gameTile)).name=t.name,this.setState(M({},this.state,{gameTile:a,isLoadingGameTitle:!1}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadGameCover",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gamesService.getGameCover(this.state.gameTile.gameID);case 2:t=(t=e.sent).replace("thumb","screenshot_med"),(a=M({},this.state.gameTile)).coverUrl=t,this.setState(M({},this.state,{gameTile:a}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).profileService=new G,a.reviewsService=new L,a.state={userProfile:{},isLoadingUserProfile:!0,userReviews:[],isLoadingUserReviews:!0},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.isLoadingUserProfile?r.a.createElement("p",null,"Loading user profile..."):this.renderUserProfile(),this.renderUserReviews())}},{key:"componentDidMount",value:function(){var e=this.props.match.params.username;this.loadUserProfile(e)}},{key:"renderUserProfile",value:function(){var e=this;return r.a.createElement("section",{className:"profile"},r.a.createElement("h2",null,this.state.userProfile.username),this.state.userProfile.followers.indexOf(this.props.loggedInUser._id)>=0?r.a.createElement("button",{onClick:function(){return e.handleUnfollowUser(e.state.userProfile)}},"Unfollow"):r.a.createElement("button",{onClick:function(){return e.handleFollowUser(e.state.userProfile)}},"Follow"))}},{key:"renderUserReviews",value:function(){return r.a.createElement("section",{className:"user-reviews"},r.a.createElement("h2",null,this.state.isLoadingUserProfile?"user":this.state.userProfile.username,"'s reviews (",this.state.isLoadingUserReviews?"loading...":this.state.userReviews.length,")"),this.state.userReviews.length>0?r.a.createElement("ul",null,this.state.userReviews.map((function(e){return r.a.createElement(k.b,{to:"/reviews/".concat(e._id),key:e._id},r.a.createElement(A,{gameTile:e}))}))):this.state.isLoadingUserReviews?r.a.createElement("p",null,"Loading reviews..."):r.a.createElement("p",null,"You don't have any saved reviews."))}},{key:"handleFollowUser",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.profileService.follow(t,this.props.loggedInUser);case 2:(a=e.sent).followRequest?((n=q({},this.state.userProfile)).followers=a.followed.followers,this.setState(q({},this.state,{userProfile:n}))):alert("Something went wrong");case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleUnfollowUser",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.profileService.unfollow(t,this.props.loggedInUser);case 2:(a=e.sent).unfollowRequest&&((n=q({},this.state.userProfile)).followers=a.unfollowed.followers,this.setState(q({},this.state,{userProfile:n})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadUserProfile",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.profileService.getProfile(t);case 2:a=e.sent,this.setState(q({},this.state,{userProfile:a.userProfile,isLoadingUserProfile:!1})),this.loadUserReviews();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadUserReviews",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reviewsService.getReviewsPerUser(this.state.userProfile._id);case 2:t=e.sent,this.setState(q({},this.state,{userReviews:t,isLoadingUserReviews:!1}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component),H=function(e){function t(e){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).call(this))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"User profile"),r.a.createElement("p",null,r.a.createElement("strong",null,"Username: "),this.props.loggedInUser.username," "),r.a.createElement("section",{className:"followers"},r.a.createElement("h2",null,"Followers (",this.props.loggedInUser.followers.length,")"),this.renderFollowers()),r.a.createElement("section",{className:"following"},r.a.createElement("h2",null,"Following (",this.props.loggedInUser.following.length,")"),this.renderFollowing()))}},{key:"renderFollowers",value:function(){return this.props.loggedInUser.followers.length>0?r.a.createElement("ul",null,this.props.loggedInUser.followers.map((function(e){return r.a.createElement("li",null,r.a.createElement(k.b,{to:"/profile/".concat(e.username)},e.username))}))):r.a.createElement("p",null,"You have no followers yet")}},{key:"renderFollowing",value:function(){return this.props.loggedInUser.following.length>0?r.a.createElement("ul",null,this.props.loggedInUser.following.map((function(e){return r.a.createElement("li",null,r.a.createElement(k.b,{to:"/profile/".concat(e.username)},e.username))}))):r.a.createElement("p",null,"You don't follow anybody yet.")}}]),t}(n.Component),B=a(18),V=function e(){var t=this;Object(m.a)(this,e),this.getAllGenres=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/");case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),this.service=w.a.create({baseURL:"".concat("https://tiergames.herokuapp.com","/api/genres")})},J=function e(){var t=this;Object(m.a)(this,e),this.platforms=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/");case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)}))),this.service=w.a.create({baseURL:"".concat("https://tiergames.herokuapp.com","/api/platforms")})},K=function(e){var t=e.platform,a=t.name,n=t.id,s=t._id,i=e.type,c=e.onChange,o=e.checked,l="checkbox"===i?s:"platform";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"field"},r.a.createElement("input",{id:s,type:i,name:l,value:n,onChange:c,checked:o}),r.a.createElement("label",{htmlFor:s},a)))},X=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={platforms:e.platforms,platformsSelected:e.selectedPlatforms||[]},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=Object(B.a)(this.state.platformsSelected);"checkbox"===e.target.type&&e.target.checked?t.push(+e.target.value):t.pop(),"radio"===e.target.type&&(t=[+e.target.value]),this.setState({platformsSelected:t}),this.props.handlePlatformFilterChange(t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.platforms,n=t.platformsSelected,s=this.props.type;return r.a.createElement(r.a.Fragment,null,a.map((function(t){return r.a.createElement(K,{key:t.id,type:s,platform:t,onChange:function(t){return e.handleChange(t)},checked:n.includes(t.id)})})))}}]),t}(n.Component),$=function(e){var t=e.genre,a=t.name,n=t.id,s=t._id,i=e.type,c=e.onChange,o=e.checked,l="checkbox"===i?s:"genre";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"field"},r.a.createElement("input",{id:s,type:i,name:l,value:n,onChange:c,checked:o}),r.a.createElement("label",{htmlFor:s},a)))},z=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={genres:e.genres,genresSelected:e.selectedGenres||[]},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=Object(B.a)(this.state.genresSelected);"checkbox"===e.target.type&&e.target.checked?t.push(+e.target.value):t.pop(),"radio"===e.target.type&&(t=[+e.target.value]),this.setState({genreSelected:t}),this.props.handleGenreFilterChange(t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.genres,n=t.genresSelected,s=this.props.type;return r.a.createElement(r.a.Fragment,null,a.map((function(t){return r.a.createElement($,{key:t.id,type:s,genre:t,onChange:function(t){return e.handleChange(t)},checked:n.includes(t.id)})})))}}]),t}(n.Component);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).service=new J,a._isMounted=!1,a.state={platforms:e.platforms.platforms,platformsFiltered:e.platforms.platforms,isLoadingPlatforms:e.platforms.isLoadingPlatforms,currentPlatform:e.platforms.currentPlatform},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Platforms"),r.a.createElement("ul",{className:"platforms-list"},this.state.platformsFiltered.length>0?this.state.platformsFiltered.map((function(e){return r.a.createElement("li",{key:e._id},e.name)})):null))}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.platforms();case 2:t=e.sent,this._isMounted&&this.setState(Z({},this.state,{platforms:t}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component),te=a(22),ae=a.n(te);function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var se=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleGenreFilterChange=function(e){a.props.onGenreFilterChange(e)},a.handlePlatformFilterChange=function(e){a.props.onPlatformFilterChange(e)},a.gamesService=new _,a.genresService=new V,a.platformsService=new J,a.queryParams=ae.a.parse(window.location.search),a.state={pagination:{limit:10,offset:0,currentPage:0},games:e.games},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderFilters(),this.renderGames())}},{key:"componentDidMount",value:function(){}},{key:"loadNextGames",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoadingGames:!0}),t=this.state.pagination.currentPage+1,a=this.state.pagination.limit*t,e.next=5,this.gamesService.getGames(this.state.pagination.limit,a);case 5:n=e.sent,r=Object(B.a)(this.state.games),(s=re({},this.state.pagination)).offset=a,s.currentPage=t,r.push.apply(r,Object(B.a)(n.data)),this.setState({pagination:s,games:r,isLoadingGames:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderFilters",value:function(){var e=this;return r.a.createElement("section",null,r.a.createElement("form",{className:"form",onSubmit:function(t){return e.handleFormSubmit(t)}},r.a.createElement("section",{className:"form-section"},r.a.createElement("h3",null,"Genres"),r.a.createElement("div",{className:"form-section-content"},this.props.genres.isLoadingGenres?r.a.createElement("p",null,"Loading genres..."):r.a.createElement(z,{handleGenreFilterChange:this.handleGenreFilterChange,selectedGenres:this.props.genres.currentGenre,genres:this.props.genres.genres,type:"checkbox"}))),r.a.createElement("section",{className:"form-section"},r.a.createElement("h3",null,"Platforms"),r.a.createElement("div",{className:"form-section-content"},this.props.platforms.isLoadingPlatforms?r.a.createElement("p",null,"Loading platforms..."):r.a.createElement(X,{handlePlatformFilterChange:this.handlePlatformFilterChange,platforms:this.props.platforms.platforms,selectedPlatforms:this.props.platforms.currentPlatform,type:"checkbox"}))),r.a.createElement("div",{className:"form-actions"},r.a.createElement("button",{type:"submit"},"Apply filter"))))}},{key:"handleFormSubmit",value:function(e){e.preventDefault(),this.props.onFilterApply()}},{key:"renderGames",value:function(){var e=this;return r.a.createElement("section",null,r.a.createElement("h2",null,"Games"),r.a.createElement("ul",{className:"games-list"},this.state.games.games.length>0?this.state.games.games.map((function(e){return r.a.createElement(k.b,{key:e.id,to:"/games/".concat(e.id)},r.a.createElement("li",null,e.name))})):null),this.state.games.isLoadingGames?r.a.createElement(k.b,{to:"#"},"Loading..."):r.a.createElement(k.b,{to:"#",onClick:function(){return e.loadNextGames()}},"Load more"))}}]),t}(n.Component);function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var oe=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).service=new V,e.state={isLoadingGenres:!0,genres:[]},e}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"genres-section"},r.a.createElement("h1",null,"Genres"),r.a.createElement("ul",{className:"genres-list"},this.state.genres.length>0?this.state.genres.map((function(e){return r.a.createElement("li",{key:e.id},e.name)})):null,this.state.isLoadingGenres?r.a.createElement("p",{to:"#"},"Loading..."):null))}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.getAllGenres();case 2:t=e.sent,this.setState(ce({},this.state,{genres:t.data,isLoadingGenres:!1}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component);function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).reviewsService=new L,a.gamesService=new _;var n=ae.a.parse(window.location.search);return a.state={title:"",platform:"",review:"",history:{content:"",rating:""},graphics:{content:"",rating:""},sound:{content:"",rating:""},gameplay:{content:"",rating:""},author:e.loggedInUser._id,pros:"",cons:"",gameName:"",isLoadingGameName:!0,gameID:n.game?n.game:""},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",null,r.a.createElement("h2",null,"New review"),r.a.createElement("form",{onSubmit:function(t){return e.handleCreateReviewFormSubmit(t)}},r.a.createElement("input",{type:"hidden",name:"gameID",value:this.state.gameID}),r.a.createElement("input",{type:"hidden",name:"gameName",value:this.state.gameName}),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",disabled:!0,name:"game",id:"game",value:this.state.isLoadingGameName?"Loading name...":this.state.gameName,placeholder:"The game for the review"}),r.a.createElement("label",{htmlFor:"game",className:"label"},"Game")),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",onChange:function(t){return e.handleInputChange(t)},value:this.state.title,name:"title",id:"title",placeholder:"Title of the review"}),r.a.createElement("label",{htmlFor:"title",className:"label"},"Title")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"platforms-selection"},this.props.platforms.map((function(t){return r.a.createElement("div",{className:"platforms-selection-tag",key:t._id},r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleInputChange(t)},id:t._id,name:"platform",value:t._id}),r.a.createElement("label",{htmlFor:t._id},t.name))}))),r.a.createElement("label",{htmlFor:"platform",className:"label"},"Platform")),r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{name:"review",onChange:function(t){return e.handleInputChange(t)},value:this.state.review,id:"review"}),r.a.createElement("label",{htmlFor:"review",className:"label"},"Review content")),r.a.createElement("div",{className:"form-section"},r.a.createElement("h3",null,"History content"),r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{name:"historyContent",onChange:function(t){return e.handleInputChange(t,"history")},value:this.state.history.content,id:"history-content"}),r.a.createElement("label",{htmlFor:"history-content"},"History content")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"stars-validation"},r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"history")},name:"historyRating",value:"1",id:"history-rating-1"}),r.a.createElement("label",{htmlFor:"history-rating-1",className:"star"},"1"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"history")},name:"historyRating",value:"2",id:"history-rating-2"}),r.a.createElement("label",{htmlFor:"history-rating-2",className:"star"},"2"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"history")},name:"historyRating",value:"3",id:"history-rating-3"}),r.a.createElement("label",{htmlFor:"history-rating-3",className:"star"},"3"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"history")},name:"historyRating",value:"4",id:"history-rating-4"}),r.a.createElement("label",{htmlFor:"history-rating-4",className:"star"},"4"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"history")},name:"historyRating",value:"5",id:"history-rating-5"}),r.a.createElement("label",{htmlFor:"history-rating-5",className:"star"},"5")),r.a.createElement("label",{htmlFor:"history-rating",className:"label"},"History rating"))),r.a.createElement("div",{className:"form-section"},r.a.createElement("h3",null,"Graphics content"),r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{name:"graphicsContent",onChange:function(t){return e.handleInputChange(t,"graphics")},value:this.state.graphics.content,id:"graphic-content"}),r.a.createElement("label",{htmlFor:"graphic-content"},"Graphic content")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"stars-validation"},r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"graphics")},name:"graphicsRating",value:"1",id:"graphic-rating-1"}),r.a.createElement("label",{htmlFor:"graphic-rating-1",className:"star"},"1"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"graphics")},name:"graphicsRating",value:"2",id:"graphic-rating-2"}),r.a.createElement("label",{htmlFor:"graphic-rating-2",className:"star"},"2"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"graphics")},name:"graphicsRating",value:"3",id:"graphic-rating-3"}),r.a.createElement("label",{htmlFor:"graphic-rating-3",className:"star"},"3"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"graphics")},name:"graphicsRating",value:"4",id:"graphic-rating-4"}),r.a.createElement("label",{htmlFor:"graphic-rating-4",className:"star"},"4"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"graphics")},name:"graphicsRating",value:"5",id:"graphic-rating-5"}),r.a.createElement("label",{htmlFor:"graphic-rating-5",className:"star"},"5")),r.a.createElement("label",{htmlFor:"graphic-rating",className:"label"},"Graphic rating"))),r.a.createElement("div",{className:"form-section"},r.a.createElement("h3",null,"Sound content"),r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{name:"soundContent",onChange:function(t){return e.handleInputChange(t,"sound")},value:this.state.sound.content,id:"sound-content"}),r.a.createElement("label",{htmlFor:"sound-content"},"Sound content")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"stars-validation"},r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"sound")},name:"soundRating",value:"1",id:"sound-rating-1"}),r.a.createElement("label",{htmlFor:"sound-rating-1",className:"star"},"1"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"sound")},name:"soundRating",value:"2",id:"sound-rating-2"}),r.a.createElement("label",{htmlFor:"sound-rating-2",className:"star"},"2"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"sound")},name:"soundRating",value:"3",id:"sound-rating-3"}),r.a.createElement("label",{htmlFor:"sound-rating-3",className:"star"},"3"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"sound")},name:"soundRating",value:"4",id:"sound-rating-4"}),r.a.createElement("label",{htmlFor:"sound-rating-4",className:"star"},"4"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"sound")},name:"soundRating",value:"5",id:"sound-rating-5"}),r.a.createElement("label",{htmlFor:"sound-rating-5",className:"star"},"5")),r.a.createElement("label",{htmlFor:"sound-rating",className:"label"},"Sound rating"))),r.a.createElement("div",{className:"form-section"},r.a.createElement("h3",null,"Gameplay content"),r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{name:"gameplayContent",onChange:function(t){return e.handleInputChange(t,"gameplay")},value:this.state.gameplay.content,id:"gameplay-content"}),r.a.createElement("label",{htmlFor:"gameplay-content"},"Gameplay content")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"stars-validation"},r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"gameplay")},name:"gameplayRating",value:"1",id:"gameplay-rating-1"}),r.a.createElement("label",{htmlFor:"gameplay-rating-1",className:"star"},"1"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"gameplay")},name:"gameplayRating",value:"2",id:"gameplay-rating-2"}),r.a.createElement("label",{htmlFor:"gameplay-rating-2",className:"star"},"2"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"gameplay")},name:"gameplayRating",value:"3",id:"gameplay-rating-3"}),r.a.createElement("label",{htmlFor:"gameplay-rating-3",className:"star"},"3"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"gameplay")},name:"gameplayRating",value:"4",id:"gameplay-rating-4"}),r.a.createElement("label",{htmlFor:"gameplay-rating-4",className:"star"},"4"),r.a.createElement("input",{type:"radio",onClick:function(t){return e.handleSelectInputChange(t,"gameplay")},name:"gameplayRating",value:"5",id:"gameplay-rating-5"}),r.a.createElement("label",{htmlFor:"gameplay-rating-5",className:"star"},"5")),r.a.createElement("label",{htmlFor:"gameplay-rating",className:"label"},"Gameplay rating"))),r.a.createElement("div",{className:"form-section"},r.a.createElement("h3",null,"Pros and cons"),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",onChange:function(t){return e.handleInputChange(t)},value:this.state.pros,name:"pros",id:"pros"}),r.a.createElement("label",{htmlFor:"pros",className:"label"},"Pros")),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",onChange:function(t){return e.handleInputChange(t)},value:this.state.cons,name:"cons",id:"cons"}),r.a.createElement("label",{htmlFor:"cons",className:"label"},"Cons"))),r.a.createElement("div",{className:"form-actions"},r.a.createElement("input",{type:"submit",value:"Create"}))))}},{key:"componentDidMount",value:function(){this.loadGameName()}},{key:"loadGameName",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.state.gameID){e.next=5;break}return e.next=3,this.gamesService.getGameName(this.state.gameID);case 3:t=e.sent,this.setState(ue({},this.state,{gameName:t.name,isLoadingGameName:!1}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCreateReviewFormSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.reviewsService.createReview(this.state);case 3:e.sent.created&&alert("Review created successfully");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSelectInputChange",value:function(e,t){var a=ue({},this.state);"platform"===e.target.name?a.platform=e.target.value:a[t].rating=+e.target.value,this.setState(a)}},{key:"handleInputChange",value:function(e,t){var a=ue({},this.state);t?a[t].content=e.target.value:a[e.target.name]=e.target.value,this.setState(a)}}]),t}(n.Component),he=a(43),pe=a.n(he),fe=(a(138),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).gamesService=new _,a.state={gameID:e.match.params.gameID,game:{},isLoadingGame:!0},console.log("THEH STATETETETETE",a.state),a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return console.log("TESTING",this.props.loggedInUser.savedGames.indexOf(+this.state.gameID)),r.a.createElement("section",{className:"game"},this.props.loggedInUser.savedGames.indexOf(+this.state.gameID)<0?r.a.createElement("button",{onClick:function(){return e.props.handleFollowRequest(e.state.gameID)}},"Follow"):r.a.createElement("button",{onClick:function(){return e.props.handleUnfollowRequest(e.state.gameID)}},"Unfollow"),this.state.isLoadingGame?r.a.createElement("p",null,"Loading game info..."):this.renderGame())}},{key:"componentDidMount",value:function(){this.loadGame(this.state.gameID)}},{key:"componentWillReceiveProps",value:function(e,t){e.match.params.gameID!==t.gameID&&this.loadGame(e.match.params.gameID,!0)}},{key:"renderTemplate",value:function(){}},{key:"renderGame",value:function(){return r.a.createElement("section",{className:"game-enter"},this.renderHeader(),this.renderIAmFollowing(),this.state.game.summary?this.renderSummary():null,this.state.game.storyline?this.renderStoryLine():null,this.state.game.game_modes?this.renderGameModes():null,this.state.game.genres?this.renderGameGenres():null,this.state.game.screenshots?this.renderScreenshots():null,this.state.game.videos?this.renderVideos():null,this.state.game.release_dates?this.renderReleaseDates():null,this.state.game.websites?this.renderWebsites():null,this.state.game.similar_games?this.renderSimilarGames():null)}},{key:"renderHeader",value:function(){return r.a.createElement("header",{className:"game-header"},r.a.createElement("div",{className:"game-header-image"},this.state.game.cover?r.a.createElement("img",{src:"http:".concat(this.state.game.cover.url.replace("t_thumb","t_cover_small_2x")),alt:this.state.game.name}):null),r.a.createElement("div",{className:"game-header-info"},r.a.createElement("h2",{className:"game-title"},this.state.game.name),r.a.createElement("div",{className:"game-platforms"},this.state.game.platforms?this.renderPlatforms():null)))}},{key:"renderIAmFollowing",value:function(){return r.a.createElement("div",{className:"game-actions"},r.a.createElement("div",null,r.a.createElement("span",{className:"game-actions-status"},"Following"),r.a.createElement("span",{className:"game-actions-rating"},(this.state.game.total_rating/10).toFixed(1))),r.a.createElement("div",null,r.a.createElement(k.b,{to:"/room?room=".concat(this.state.game.slug)},"Game chat room")))}},{key:"renderSummary",value:function(){return r.a.createElement("section",{className:"game-section"},r.a.createElement("h3",null,"Summary"),r.a.createElement("div",{className:"game-section-content"},r.a.createElement("p",null,this.state.game.summary)))}},{key:"renderStoryLine",value:function(){return r.a.createElement("section",{className:"game-section"},r.a.createElement("h3",null,"Story line"),r.a.createElement("p",null,this.state.game.storyline))}},{key:"renderPlatforms",value:function(){return this.state.game.platforms.map((function(e){return r.a.createElement(k.b,{to:"/games?platform=".concat(e.id),key:e.id,className:"tag"},e.name)}))}},{key:"renderGameModes",value:function(){return r.a.createElement("section",{className:"game-section"},r.a.createElement("h3",null,"Modes"),r.a.createElement("div",{className:"game-section-content"},r.a.createElement("ul",null,this.state.game.game_modes.map((function(e){return r.a.createElement("li",{key:e.id},e.name)})))))}},{key:"renderGameGenres",value:function(){return r.a.createElement("section",{className:"game-section"},r.a.createElement("h3",null,"Genres"),r.a.createElement("div",{className:"game-section-content"},r.a.createElement("ul",null,this.state.game.genres.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(k.b,{to:"/games?genres=".concat(e)},e.name))})))))}},{key:"renderInvolvedCompanies",value:function(){return r.a.createElement("ul",null,this.state.game.involved_companies.map((function(e){return r.a.createElement("li",{key:e.id},e.name)})))}},{key:"renderScreenshots",value:function(){var e=this;return r.a.createElement("section",{className:"game-section"},r.a.createElement("h3",null,"Screenshots"),r.a.createElement("div",{className:"game-section-content"},r.a.createElement("ul",null,this.state.game.screenshots.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement("img",{src:"http:".concat(t.url.replace("t_thumb","t_screenshot_big")),alt:"".concat(e.state.game.name," screenshot")}))})))))}},{key:"renderVideos",value:function(){return r.a.createElement("section",{className:"game-section"},r.a.createElement("h3",null,"Videos"),r.a.createElement("div",{className:"game-section-content"},r.a.createElement("ul",null,this.state.game.videos.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/".concat(e.video_id),frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),r.a.createElement("p",null,e.name))})))))}},{key:"renderReleaseDates",value:function(){return r.a.createElement("section",{className:"game-section"},r.a.createElement("h3",null,"Release dates"),r.a.createElement("section",{className:"game-subsection"},r.a.createElement("h4",null,"First release date"),r.a.createElement("p",null,r.a.createElement(pe.a,{format:"MMMM Do YYYY"},new Date(1e3*this.state.game.first_release_date)))),r.a.createElement("section",{className:"game-subsection"},r.a.createElement("h4",null,"Other release dates"),this.state.game.release_dates.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(pe.a,{format:"MMMM Do YYYY"},new Date(new Date(1e3*e.date))))}))))}},{key:"renderWebsites",value:function(){return r.a.createElement("section",{className:"game-section"},r.a.createElement("h3",null,"Websites"),r.a.createElement("div",{className:"game-section-content"},r.a.createElement("ul",null,this.state.game.websites.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("a",{href:"".concat(e.url),target:"_blank"},e.url))})))))}},{key:"renderSimilarGames",value:function(){return r.a.createElement("section",{className:"game-section"},r.a.createElement("h3",null,"Similar games"),r.a.createElement("div",{className:"game-section-content"},this.state.game.similar_games.map((function(e){return r.a.createElement(k.b,{to:"/games/".concat(e.id),key:e.id},r.a.createElement("li",null,e.cover?r.a.createElement("img",{src:"http:".concat(e.cover.url.replace("t_thumb","t_cover_small_2x")),alt:"".concat(e.name)}):null,r.a.createElement("p",null,e.name)))}))))}},{key:"loadGame",value:function(){var e=Object(l.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadRelatedGames",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component)),de=Object(g.g)(fe),ge=function e(){var t=this;Object(m.a)(this,e),this.loadComments=function(){var e=Object(l.a)(o.a.mark((function e(a,n,r){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/?reviewID=".concat(r));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),this.addComment=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.post("/add",a);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.service=w.a.create({baseURL:"http://localhost:3001/api/reviewComments"})};function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var be=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).reviewsService=new L,a.reviewCommentsService=new ge,a.state={review:null,isLoadingReview:[],comment:{content:"",authorID:a.props.loggedInUserID,reviewID:a.props.match.params.reviewID},comments:{comments:[],isLoadingComments:!0,pagination:{currentPage:0,offset:0,limit:10}}},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"review"},this.state.isLoadingReview?r.a.createElement("p",null,"Loading review..."):this.renderReview())}},{key:"componentDidMount",value:function(){this.loadReviewData(),this.loadComments()}},{key:"loadReviewData",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reviewsService.getReviewData(this.props.match.params.reviewID);case 2:t=e.sent,this.setState(we({},this.state,{review:t,isLoadingReview:!1}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadComments",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=we({},this.state.comments)).isLoadingComments=!0,e.next=4,this.reviewCommentsService.loadComments(this.state.comments.pagination.offset,this.state.comments.pagination.limit,this.state.comment.reviewID);case 4:a=e.sent,t.pagination.pagcurrentPage+=1,t.pagination.offset=t.pagination.currentPage*t.pagination.limit,t.comments=a.comments,t.isLoadingComments=!1,this.setState(we({},this.state,{comments:t}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderReview",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("div",null,r.a.createElement("span",null,"Load game cover here")),r.a.createElement("div",null,r.a.createElement("p",null,this.state.review.platform.name),r.a.createElement("h2",null,this.state.review.gameName," ",r.a.createElement(k.b,{to:"/games/".concat(this.state.review.gameID)},"View")),this.props.loggedInUserName===this.state.review.author.username?r.a.createElement("p",null,"by ",r.a.createElement(k.b,{to:"/profile"},"me")):r.a.createElement("p",null,"by ",r.a.createElement(k.b,{to:"/profile/".concat(this.state.review.author.username)},this.state.review.author.username)))),r.a.createElement("section",{className:"review-stats"},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,r.a.createElement("span",null,this.state.review.followers.length))," users follow this review")),r.a.createElement("div",{className:"following-and-rating"},this.state.review.followers.indexOf(this.props.loggedInUser._id)>=0?r.a.createElement("button",{onClick:function(){return e.handleUnfollowReview()}},"Unfollow"):r.a.createElement("button",{onClick:function(){return e.handleFollowReview()}},"Follow"),r.a.createElement("div",{className:"rating"},r.a.createElement("span",null,this.state.review.totalRating)))),r.a.createElement("section",null,r.a.createElement("h2",null,this.state.review.title),r.a.createElement("p",null,this.state.review.review),r.a.createElement("section",null,r.a.createElement("h3",null,"History"),r.a.createElement("p",null,this.state.review.history.content),r.a.createElement("span",{className:"category-rating"},this.state.review.history.rating)),r.a.createElement("section",null,r.a.createElement("h3",null,"Gameplay"),r.a.createElement("p",null,this.state.review.gameplay.content),r.a.createElement("span",{className:"category-rating"},this.state.review.gameplay.rating)),r.a.createElement("section",null,r.a.createElement("h3",null,"Graphics"),r.a.createElement("p",null,this.state.review.graphics.content),r.a.createElement("span",{className:"category-rating"},this.state.review.graphics.rating)),r.a.createElement("section",null,r.a.createElement("h3",null,"Sound"),r.a.createElement("p",null,this.state.review.sound.content),r.a.createElement("span",{className:"category-rating"},this.state.review.sound.rating))),r.a.createElement("section",{className:"comments"},r.a.createElement("h2",null,"Comments"),this.renderComments()))}},{key:"renderComments",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"comment-form",onSubmit:function(t){return e.handleFormSubmit(t)}},r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{onChange:function(t){return e.handleCommentChange(t)},type:"text",name:"content",placeholder:"Write a comment",value:this.state.comment.content,id:"comment-text"}),r.a.createElement("label",{htmlFor:"comment-text",className:"label"},"Comment")),r.a.createElement("div",{className:"form-actions"},r.a.createElement("input",{type:"submit",value:"Send"}))),r.a.createElement("div",{className:"user-comments"},this.state.comments.comments.length>0?this.state.comments.comments.map((function(e){return r.a.createElement("div",{className:"comment",key:e._id},r.a.createElement("div",{className:"comment-user"},r.a.createElement("p",null,r.a.createElement("strong",null,"User: "),e.authorID.username)),r.a.createElement("div",{className:"comment-content"},e.content))})):r.a.createElement("p",null,"There are no comments yet.")),r.a.createElement("div",{className:"comments-load-more"},this.state.comments.isLoadingComments?r.a.createElement(k.b,{to:""},"Loading..."):r.a.createElement(k.b,{onClick:function(){return e.loadComments()},to:"#"},"Load more")))}},{key:"handleFollowReview",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reviewsService.follow(this.state.review._id,this.props.loggedInUser._id);case 2:(t=e.sent).reviewFollowRequestDone&&((a=we({},this.state.review)).followers=t.reviewFollow.followers,this.setState(we({},this.state,{review:a})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleUnfollowReview",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reviewsService.unfollow(this.state.review._id,this.props.loggedInUser._id);case 2:(t=e.sent).reviewUnfollowRequestDone&&((a=we({},this.state.review)).followers=t.review.followers,this.setState(we({},this.state,{review:a})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCommentChange",value:function(e){var t=we({},this.state.comment);t[e.target.name]=e.target.value,this.setState(we({},this.state,{comment:t}))}},{key:"handleFormSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.reviewCommentsService.addComment(this.state.comment);case 3:(a=e.sent).commentCreated&&((n=we({},this.state.comments)).comments.unshift(a.commentCreated),this.setState(we({},this.state,{comments:n})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(n.Component);function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Oe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).reviewsService=new L,a.state={savedReviews:[],isLoadingSavedReviews:!0,savedGames:[],isLoadingSavedGames:!0},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"saved"},r.a.createElement("h2",null,"Saved reviews"),this.renderSavedReviews())}},{key:"componentDidMount",value:function(){this.loadSavedReviews()}},{key:"renderSavedReviews",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.isLoadingSavedReviews?r.a.createElement("p",null,"Loading saved reviews..."):r.a.createElement("ul",null,this.state.savedReviews.map((function(e){return r.a.createElement(k.b,{to:"/reviews/".concat(e._id),key:e._id},r.a.createElement(A,{key:e._id,gameTile:e}))}))))}},{key:"loadSavedReviews",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reviewsService.getReviewsPerUser(this.props.loggedInUser._id);case 2:t=e.sent,this.setState(Ee({},this.state,{savedReviews:t,isLoadingSavedReviews:!1}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component);function ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ke(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ke(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Se=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).queryParams=ae.a.parse(window.location.search),a.socket=E()("".concat("https://tiergames.herokuapp.com")),a.state={message:"",currentOnlineUsers:[],messages:[]},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"room"},r.a.createElement("h1",null,"Room"),r.a.createElement("div",{className:"chat"},r.a.createElement("div",{className:"chat-users"},this.state.currentOnlineUsers.length>0?r.a.createElement("ul",{className:"chat-users-list"},this.state.currentOnlineUsers.map((function(e){return r.a.createElement("li",{key:e.username},e.username)}))):null),this.state.messages.length>0?r.a.createElement("ul",{className:"chat-messages"},this.state.messages.map((function(e,t){return r.a.createElement("li",{key:t},e.content)}))):null),r.a.createElement("form",{onSubmit:function(t){return e.handleFormSubmit(t)}},r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",name:"message",id:"message",onChange:function(t){return e.handleInputChange(t)},value:this.state.message,placeholder:"Type here your message"})),r.a.createElement("div",{className:"form-actions"},r.a.createElement("input",{type:"submit",value:"Send message"}))))}},{key:"handleFormSubmit",value:function(e){e.preventDefault(),this.socket.emit("user-send-message-room",{content:this.state.message,room:this.queryParams.room}),this.setState(je({},this.state,{message:""}))}},{key:"handleInputChange",value:function(e){this.setState({message:e.target.value})}},{key:"componentDidMount",value:function(){var e=this;this.socket.emit("user-join-room",{username:this.props.loggedInUser.username,room:this.queryParams.room}),this.socket.on("get-room-messages",(function(t){e.setState(je({},e.state,{messages:t.messages}))})),this.socket.on("user-join-room",(function(t){e.setState(je({},e.state,{currentOnlineUsers:t.currentOnlineUsers}))})),this.socket.on("user-send-message-room",(function(t){var a=Object(B.a)(e.state.messages);a.push({username:t.username,content:t.content}),e.setState(je({},e.state,{messages:a}))})),this.socket.on("user-left-room",(function(t){e.setState(je({},e.state,{currentOnlineUsers:t.currentOnlineUsers}))})),this.socket.on("update-online-users",(function(t){e.setState(je({},e.state,{currentOnlineUsers:t.currentOnlineUsers}))}))}},{key:"componentWillUnmount",value:function(){this.socket.off("user-join-room"),this.socket.off("update-online-users"),this.socket.off("user-left-room"),this.socket.off("user-send-message-room"),this.socket.emit("user-left-room",{username:this.props.loggedInUser.username})}}]),t}(n.Component);a(146);function Ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Pe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleLogout=function(e){a.props.logout()},a.state={loggedInUser:null},a.authService=new b,a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("ul",{className:"menu"},this.state.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"menu-item"},r.a.createElement(k.b,{className:"menu-link",to:"/"},"Home")),r.a.createElement("li",{className:"menu-item"},r.a.createElement(k.b,{className:"menu-link",to:"/games"},"Games")),r.a.createElement("li",{className:"menu-item"},r.a.createElement(k.b,{className:"menu-link",to:"/reviews"},"Reviews")),r.a.createElement("li",{className:"menu-item"},r.a.createElement(k.b,{className:"menu-link",to:"/profile"},"Profile")),r.a.createElement("li",{className:"menu-item"},r.a.createElement(k.b,{className:"menu-link",to:"/games/coming-soon"},"Coming Soon")),r.a.createElement("li",{className:"menu-item"},r.a.createElement(k.b,{className:"menu-link",to:"/games/best-rated"},"Best rated")),r.a.createElement("li",{className:"menu-item"},r.a.createElement(k.b,{className:"menu-link",to:"/saved"},"Saved")),r.a.createElement("li",{className:"menu-item"},r.a.createElement(k.b,{className:"menu-link",to:"/logout",onClick:this.handleLogout},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"menu-item"},r.a.createElement(k.b,{className:"menu-link",to:"/login"},"Login")),r.a.createElement("li",{className:"menu-item"},r.a.createElement(k.b,{className:"menu-link",to:"/signup"},"Signup")))))}},{key:"componentWillReceiveProps",value:function(e){this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ne(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state,{loggedInUser:e.userInSession}))}}]),t}(n.Component),xe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={bestRated:e.bestRated},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("h1",null,"Best rated Games"),r.a.createElement("ul",{className:"best-rated-list"},this.state.bestRated.length>0?this.state.bestRated.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(k.b,{to:"/games/".concat(e.id)},e.name," (",(5*e.rating/100).toFixed(1),")"))})):r.a.createElement("p",null,"Loading...")))}}]),t}(n.Component),De=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).service=new _,a.state={releases:e.releases},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Releases"),this.render7DaysAgo(),this.render7Days(),this.render14Days(),this.render1Month(),this.render6Months(),this.render1Year())}},{key:"render7DaysAgo",value:function(){return r.a.createElement("section",null,r.a.createElement("h2",null,"Recently released"),r.a.createElement("ul",null,this.props.releases.releases7DaysAgo.isLoading7DaysAgo?r.a.createElement("p",null,"Loading..."):this.props.releases.releases7DaysAgo.releases7DaysAgo.length>0?this.props.releases.releases7DaysAgo.releases7DaysAgo.map((function(e){return r.a.createElement("li",{key:e.id},"".concat(e.name," (").concat(new Date(1e3*e.first_release_date).toDateString(),")"))})):r.a.createElement("p",null,"No recent releases")))}},{key:"render7Days",value:function(){return r.a.createElement("section",null,r.a.createElement("h2",null,"Next 7 days"),r.a.createElement("ul",null,this.props.releases.releases7Days.isLoading7Days?r.a.createElement("p",null,"Loading..."):this.props.releases.releases7Days.releases7Days.length>0?this.props.releases.releases7Days.releases7Days.map((function(e){return r.a.createElement("li",{key:e.id},"".concat(e.name," (").concat(new Date(1e3*e.first_release_date).toDateString(),")"))})):r.a.createElement("p",null,"No recent releases")))}},{key:"render14Days",value:function(){return r.a.createElement("section",null,r.a.createElement("h2",null,"Next 14 days"),r.a.createElement("ul",null,this.props.releases.releases14Days.isLoading14Days?r.a.createElement("p",null,"Loading..."):this.props.releases.releases14Days.releases14Days.length>0?this.props.releases.releases14Days.releases14Days.map((function(e){return r.a.createElement("li",{key:e.id},"".concat(e.name," (").concat(new Date(1e3*e.first_release_date).toDateString(),")"))})):r.a.createElement("p",null,"No releases for the next 14 days")))}},{key:"render1Month",value:function(){return r.a.createElement("section",null,r.a.createElement("h2",null,"Next 30 days"),r.a.createElement("ul",null,this.props.releases.releases1Month.isLoading1Month?r.a.createElement("p",null,"Loading..."):this.props.releases.releases1Month.releases1Month.length>0?this.props.releases.releases1Month.releases1Month.map((function(e){return r.a.createElement("li",{key:e.id},"".concat(e.name," (").concat(new Date(1e3*e.first_release_date).toDateString(),")"))})):r.a.createElement("p",null,"No releases for the next 30 days")))}},{key:"render6Months",value:function(){return r.a.createElement("section",null,r.a.createElement("h2",null,"Next 6 months"),r.a.createElement("ul",null,this.props.releases.releases6Months.isLoading6Months?r.a.createElement("p",null,"Loading..."):this.props.releases.releases6Months.releases6Months.length>0?this.props.releases.releases6Months.releases6Months.map((function(e){return r.a.createElement("li",{key:e.id},"".concat(e.name," (").concat(new Date(1e3*e.first_release_date).toDateString(),")"))})):r.a.createElement("p",null,"No releases for the next 6 months")))}},{key:"render1Year",value:function(){return r.a.createElement("section",null,r.a.createElement("h2",null,"Next year"),r.a.createElement("ul",null,this.props.releases.releases1Year.isLoading1Year?r.a.createElement("p",null,"Loading..."):this.props.releases.releases1Year.releases1Year.length>0?this.props.releases.releases1Year.releases1Year.map((function(e){return r.a.createElement("li",{key:e.id},"".concat(e.name," (").concat(new Date(1e3*e.first_release_date).toDateString(),")"))})):r.a.createElement("p",null,"No releases for next year")))}}]),t}(n.Component);function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Fe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).reviewsService=new L,a.state={reviews:e.reviews,platforms:e.platforms},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.renderNewReviewLink(),this.renderReviews())}},{key:"componentDidMount",value:function(){}},{key:"loadReviews",value:function(){var e=Object(l.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reviewsService.getReviews(t,a);case 2:n=e.sent,this.setState(Re({},this.state,{reviews:n,isLoadingReviews:!1}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"renderNewReviewLink",value:function(){return r.a.createElement(k.b,{to:"/reviews/create"},"Create review")}},{key:"renderReviews",value:function(){var e=this.state.platforms.platforms;return r.a.createElement("section",null,r.a.createElement("h2",null,"Reviews"),r.a.createElement(X,{platforms:e,type:"radio"}),r.a.createElement("ul",null,this.state.reviews.reviewsFiltered.length>0?this.state.reviews.reviewsFiltered.map((function(e){return r.a.createElement(k.b,{key:e._id,to:"/reviews/".concat(e._id)},r.a.createElement(A,{gameTile:e}))})):null),this.state.reviews.isLoadingReviews?r.a.createElement("p",null,"Loading..."):r.a.createElement(k.b,{to:"#",onClick:this.props.handleLoadMore},"Load more"))}}]),t}(n.Component);function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ue(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ge=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={hasFocus:!1},a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"search"},r.a.createElement("form",{className:"search-bar",onSubmit:function(t){return e.handleSearchSubmit(t)}},r.a.createElement("div",{className:"field search-field"},r.a.createElement("input",{type:"search",autoComplete:"off",onChange:function(t){return e.props.updateSearchText(t.target.value)},name:"search",id:"search",placeholder:"Search games, reviews, users...",onFocus:function(){return e.openSearchResults()}}),this.state.hasFocus&&r.a.createElement("span",{onClick:function(t){return e.closeSearchResults(t)}},"Cancel"))),this.state.hasFocus&&this.renderSearchResults())}},{key:"handleSearchSubmit",value:function(e){e.preventDefault(),this.props.makeSearch()}},{key:"renderSearchResults",value:function(){return r.a.createElement("div",{className:"search-results"},r.a.createElement("h2",null,"Results"),this.renderGamesResults(),this.renderReviewsResults(),this.renderUsersResults())}},{key:"openSearchResults",value:function(){this.setState(Ie({},this.state,{hasFocus:!0}))}},{key:"closeSearchResults",value:function(e){this.setState(Ie({},this.state,{hasFocus:!1}))}},{key:"renderGamesResults",value:function(){return r.a.createElement("section",{className:"results"},r.a.createElement("h3",null,"Games"),this.props.games.isSearchingGames?r.a.createElement("p",null,"Searching games..."):this.props.games.gamesResults.length>0?this.props.games.gamesResults.map((function(e,t){return r.a.createElement("p",{key:t},e.name)})):r.a.createElement("p",null,"No games"))}},{key:"renderReviewsResults",value:function(){return r.a.createElement("section",{className:"results"},r.a.createElement("h3",null,"Reviews"),this.props.reviews.isSearchingReviews?r.a.createElement("p",null,"Searching reviews..."):this.props.reviews.reviewsResults.length>0?this.props.reviews.reviewsResults.map((function(e,t){return r.a.createElement("p",{key:t},e.title)})):r.a.createElement("p",null,"No reviews"))}},{key:"renderUsersResults",value:function(){return r.a.createElement("section",{className:"results"},r.a.createElement("h3",null,"Users"),this.props.users.isSearchingUsers?r.a.createElement("p",null,"Searching users..."):this.props.users.usersResults.length>0?this.props.users.usersResults.map((function(e,t){return r.a.createElement("p",{key:t},e.username)})):r.a.createElement("p",null,"No users"))}}]),t}(n.Component),Le=function e(){var t=this;Object(m.a)(this,e),this.makeGamesSearch=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/games?s=".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.makeReviewsSearch=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/reviews?s=".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.makeUsersSearch=function(){var e=Object(l.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.get("/users?s=".concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.service=w.a.create({baseURL:"".concat("https://tiergames.herokuapp.com","/api/search")})};function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(a,!0).forEach((function(t){Object(u.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Me=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).setUser=function(e){a.setState(Te({},a.state,{loggedInUser:e}))},a.logout=function(){a.authService.logout().then((function(){a.setState({loggedInUser:null})}))},a.authService=new b,a.reviewsService=new L,a.platformsService=new J,a.genresService=new V,a.searchService=new Le,a.gamesService=new _,a.profileService=new G,a.socket=E()("".concat("https://tiergames.herokuapp.com")),a.state={loggedInUser:null,platforms:{isLoadingPlatforms:!0,platforms:[],platformsFiltered:[],currentPlatform:null},genres:{isLoadingGenres:!0,genres:[],genresFiltered:[],currentGenre:null},games:{isLoadingGames:!0,games:[],gamesFiltered:[],currentGame:null},bestRated:{isLoadingBestRated:!0,bestRated:[]},releases:{releases7DaysAgo:{isLoading7DaysAgo:!0,releases7DaysAgo:[]},releases7Days:{isLoading7Days:!0,releases7Days:[]},releases14Days:{isLoading14Days:!0,releases14Days:[]},releases1Month:{isLoading1Month:!0,releases1Month:[]},releases6Months:{isLoading6Months:!0,releases6Months:[]},releases1Year:{isLoading1Year:!0,releases1Year:[]}},reviews:{isLoadingReviews:!0,reviews:[],reviewsFiltered:[],currentReviewFilter:null,pagination:{currentPage:0,offset:0,limit:1}},search:{games:{gamesResults:[],isSearchingGames:!1},reviews:{reviewsResults:[],isSearchingReviews:!1},users:{usersResults:[],isSearchingUsers:!1},searchText:"",isSearching:!1}},a.fetchUser(),a}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=[];return t=[{exact:!0,path:"/login",component:function(){return r.a.createElement(P,{setUser:e.setUser})}},{exact:!0,path:"/signup",component:function(){return r.a.createElement(R,{setUser:e.setUser})}},{exact:!0,path:"/forgot-password",component:U},{exact:!0,path:"/reset-password/:resetPasswordToken",component:I},{exact:!0,path:"/update-password/:resetPasswordToken",component:I},{exact:!0,path:"/confirm/:confirmationToken",component:F}],this.state.loggedInUser&&(t=[{exact:!0,path:"/",component:O},{exact:!0,path:"/games",component:function(){return r.a.createElement(se,{genres:e.state.genres,platforms:e.state.platforms,games:e.state.games,onPlatformFilterChange:function(t){return e.handlePlatformFilterChange(t)},onGenreFilterChange:function(t){return e.handleGenreFilterChange(t)},onFilterApply:function(){return e.applyGameFilter()},loggedInUser:e.state.loggedInUser})}},{exact:!0,path:"/profile",component:function(){return r.a.createElement(H,{loggedInUser:e.state.loggedInUser})}},{exact:!0,path:"/profile/:username",render:function(t){return r.a.createElement(W,Object.assign({},t,{loggedInUser:e.state.loggedInUser}))}},{exact:!0,path:"/genres",component:function(){return r.a.createElement(oe,{genres:e.state.genres,loggedInUser:e.state.loggedInUser})}},{exact:!0,path:"/games/best-rated",component:function(){return r.a.createElement(xe,{bestRated:e.state.bestRated,loggedInUser:e.state.loggedInUser})}},{exact:!0,path:"/games/coming-soon",component:function(){return r.a.createElement(De,{releases:e.state.releases,loggedInUser:e.state.loggedInUser})}},{exact:!0,path:"/games/:gameID",render:function(t){return r.a.createElement(de,{handleUnfollowRequest:function(t){return e.handleUnfollowRequest(t)},handleFollowRequest:function(t){return e.handleFollowRequest(t)},loggedInUser:e.state.loggedInUser})}},{exact:!0,path:"/reviews",component:function(){return r.a.createElement(Fe,{reviews:e.state.reviews,handleLoadMore:function(){return e.loadReviews()},platforms:e.state.platforms,loggedInUser:e.state.loggedInUser})}},{exact:!0,path:"/reviews/create",component:function(){return r.a.createElement(me,{loggedInUser:e.state.loggedInUser,platforms:e.state.platforms.platforms})}},{exact:!0,path:"/reviews/:reviewID",component:function(t){return r.a.createElement(be,Object.assign({},t,{loggedInUserName:e.state.loggedInUser.username,loggedInUserID:e.state.loggedInUser._id,loggedInUser:e.state.loggedInUser}))}},{exact:!0,path:"/saved",component:function(t){return r.a.createElement(Oe,{loggedInUser:e.state.loggedInUser})}},{exact:!0,path:"/platforms",component:function(){return r.a.createElement(ee,{platforms:e.state.platforms,loggedInUser:e.state.loggedInUser})}},{exact:!0,path:"/room",render:function(t){return r.a.createElement(Se,Object.assign({},t,{loggedInUser:e.state.loggedInUser}))}}]),r.a.createElement("div",null,r.a.createElement(Pe,{userInSession:this.state.loggedInUser,logout:this.logout}),r.a.createElement(Ge,{makeSearch:function(){return e.makeSearch()},games:this.state.search.games,reviews:this.state.search.reviews,users:this.state.search.users,updateSearchText:function(t){return e.updateSearchText(t)},isSearching:this.state.search.isSearching}),r.a.createElement(g.d,null,t.map((function(e){return r.a.createElement(g.b,Object.assign({key:e.path},e))}))))}},{key:"componentDidMount",value:function(){this.loadPlatforms(),this.loadGenres(),this.loadReviews(),this.loadGames()}},{key:"handlePlatformFilterChange",value:function(e){var t=this.state.platforms;this.setState({platforms:Te({},t,{currentPlatform:e})})}},{key:"handleGenreFilterChange",value:function(e){var t=this.state.genres;this.setState({genres:Te({},t,{currentGenre:e})})}},{key:"applyGameFilter",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.genres.currentGenre,a=this.state.platforms.currentPlatform,e.next=4,this.gamesService.getGamesPerPlatformAndGenre(10,0,a,t);case 4:n=e.sent,r=this.state.games,this.setState({games:Te({},r,{games:n})});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleFollowRequest",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gamesService.follow(t,this.state.loggedInUser._id);case 2:(a=e.sent).gameFollowRequestDone&&(console.log("CREATEDEDEDE",a),(n=Te({},this.state.loggedInUser)).savedGames=a.follower.savedGames,this.setState(Te({},this.state,{loggedInUser:n})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleUnfollowRequest",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gamesService.unfollow(t,this.state.loggedInUser._id);case 2:(a=e.sent).gameUnfollowRequestDone&&(console.log("asdasdasdasd",a.follower),(n=Te({},this.state.loggedInUser)).savedGames=a.follower.savedGames,this.setState(Te({},this.state,{loggedInUser:n})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleFollow",value:function(e){var t=Te({},this.state.loggedInUser);t.followers=e,this.setState(Te({},this.state,{loggedInUser:t}))}},{key:"loadPlatforms",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.platformsService.platforms();case 2:t=e.sent,(a=Te({},this.state.platforms)).isLoadingPlatforms=!1,a.platforms=t,a.platformsFiltered=t,this.setState(Te({},this.state,{platforms:a}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadGenres",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.genresService.getAllGenres();case 2:t=e.sent,(a=Te({},this.state.genres)).isLoadingGenres=!1,a.genres=t.data,a.genresFiltered=t.data,this.setState(Te({},this.state,{genres:a}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadReviews",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reviewsService.getReviews(this.state.reviews.pagination.offset,this.state.reviews.pagination.limit);case 2:t=e.sent,(a=Te({},this.state.reviews)).isLoadingReviews=!1,a.reviews=a.reviews.concat(t),a.reviewsFiltered=a.reviewsFiltered.concat(t),a.pagination.currentPage+=1,a.pagination.offset=a.pagination.limit*this.state.reviews.pagination.currentPage,this.setState(Te({},this.state,{reviews:a}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateSearchText",value:function(e){var t=Te({},this.state.search);t.searchText=e,this.setState(Te({},this.state,{search:t}))}},{key:"makeGamesSearch",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Te({},this.state.search)).games.isSearchingGames=!0,this.setState(Te({},this.state,{search:t})),e.next=5,this.searchService.makeGamesSearch(this.state.search.searchText);case 5:a=e.sent,t.games.gamesResults=a,t.games.isSearchingGames=!1,this.setState(Te({},this.state,{search:t}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"makeReviewsSearch",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Te({},this.state.search)).reviews.isSearchingReviews=!0,this.setState(Te({},this.state,{search:t})),e.next=5,this.searchService.makeReviewsSearch(this.state.search.searchText);case 5:a=e.sent,t.reviews.reviewsResults=a,t.reviews.isSearchingReviews=!1,this.setState(Te({},this.state,{search:t}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"makeUsersSearch",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Te({},this.state.search)).users.isSearchingUsers=!0,this.setState(Te({},this.state,{search:t})),e.next=5,this.searchService.makeUsersSearch(this.state.search.searchText);case 5:a=e.sent,t.users.usersResults=a,t.users.isSearchingUsers=!1,this.setState(Te({},this.state,{search:t}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"makeSearch",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.makeGamesSearch(),this.makeReviewsSearch(),this.makeUsersSearch();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadGames",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gamesService.getGames(10,0);case 2:t=e.sent,(a=Te({},this.state)).isLoadingGames=!1,a.games=t.data,a.gamesFiltered=t.data,this.setState(Te({},this.state,{games:a}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadBestRated",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"desc",e.next=3,this.gamesService.getBestRated(20,0,t);case 3:a=e.sent,(n=Te({},this.state)).bestRated=a.data,this.setState(n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadReleases",value:function(){var e=Object(l.a)(o.a.mark((function e(t,a){var n,r,s,i,c=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:"asc",r=c.length>3?c[3]:void 0,e.next=4,this.gamesService.getReleases(20,0,t,n);case 4:s=e.sent,(i=Te({},this.state.releases))[a][a]=s.data,i[a][r]=!1,this.setState(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"fetchUser",value:function(){var e=this;return this.authService.loggedin().then((function(t){e.setState(Te({},e.state,{loggedInUser:t}))})).catch((function(t){e.setState(Te({},e.state,{loggedInUser:!1}))}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(k.a,null,r.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},73:function(e,t,a){e.exports=a(147)}},[[73,1,2]]]);
//# sourceMappingURL=main.5f403fb1.chunk.js.map